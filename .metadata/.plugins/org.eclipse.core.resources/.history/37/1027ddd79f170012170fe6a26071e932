<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
<c:set var="currentPage" value="currentPage" />   
<c:set var="url" value="url" />   
<c:set var="numPages" value="numPages" />   
<div class="pagination pagination-centered">
	<ul>
    <c:choose>
      <c:when test="${currentPage <= 1}">
    
      </c:when>
    </c:choose>
	  <%
	  // 페이지 네비게이션을 위한 준비
	  int startPageNo, endPageNo;
	  int delta = 5;
	  startPageNo = (pageNo <= delta) ? 1: pageNo - delta;
	  endPageNo = startPageNo + (delta * 2) + 1;
	  
	  if (endPageNo > numPages) {
	    endPageNo = numPages;
	  }
	  
	  // 이전 페이지로
	  <>if (pageNo <= 1) { 
	  %>
	    <li class="disabled"><a href="#">&laquo;</a></li>
	  <% 
	  } else {
	  %>
	    <li><a href="index.jsp?page=<%= pageNo - 1%>">&laquo;</a></li>
	  <%
	  } 
	  
	  // 페이지 목록 출력 (현재-delta ~ 현재+delta까지)
	  String className = "";
	  for(int i = startPageNo; i <= endPageNo; i++) {
	    className = (i == pageNo) ? "active" : "";
	    out.println("<li class='" + className + "'>");
	    out.println("<a href='index.jsp?page=" + i + "'>" + i + "</a>");
	    out.println("</li>");
	  }
	  
	  // 다음 페이지로
	  if (pageNo >= numPages) { 
	  %>
	    <li class="disabled"><a href="#">&raquo;</a></li>
	  <% 
	  } else {
	  %>
	    <li><a href="index.jsp?page=<%= pageNo + 1%>">&raquo;</a></li>
	  <%
	  } 
	  %>
	</ul>
</div>